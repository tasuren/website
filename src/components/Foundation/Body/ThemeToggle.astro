---
import FloatButton from "@components/FloatButton.astro";
---
<style is:global>
  #theme-toggle {
    font-size: 20px;
    /* ä¸€èª¿æ•´ */
    right: 10%; bottom: 10%;
    /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ãƒ¼ãƒã®ç„¡åŠ¹åŒ–ã€‚ */
    background: none;
    border: none;
    outline: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
  }
</style>
<script>
  import { get, set, roll, effect, detectTheme, emoji } from "@libraries/theme";

  // ãƒœã‚¿ãƒ³ã®çµµæ–‡å­—ãŒæ›´æ–°ã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
  let toggleButton = document.getElementById("theme-toggle");
  window.addEventListener("updateemoji",
    (e: CustomEvent) => toggleButton
      .innerText = e.detail);
  toggleButton.innerText = emoji;

  // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã‚’ç”¨æ„ã™ã‚‹ã€‚
  toggleButton.addEventListener("click", () => {
    // è¨­å®šã‚’èª­ã¿è¾¼ã¿ã€ãƒ†ãƒ¼ãƒã®æ›´æ–°ã‚’è¡Œã†ã€‚
    let setting = roll(get()); set(setting);
    effect(setting, detectTheme(setting), true);
  });

  // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãŒã‚†ã£ãŸã‚Šã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
  setTimeout(() => document.body.style.transition = "background .5s", .6);
</script>
<FloatButton id="theme-toggle" text="ğŸŒ™" />